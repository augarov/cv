---
description:
globs:
alwaysApply: true
---

# Project Structure Rule

Define and maintain the organized structure of the CV project with its multiple components.

<rule>
name: cv_project_structure
description: Standards for organizing the CV project structure with its multiple output formats and deployment targets
filters:
  # Match project structure changes
  - type: event
    pattern: "(directory_create|file_create|file_move)"
  # Match files that affect project organization
  - type: content
    pattern: "(?i)(structure|organization|directory|folder)"

actions:

- type: suggest
  message: |
  Maintain the CV project structure with these organized components:

  ## ğŸ“ Core Project Structure

  ```
  cv/                           # Main project root
  â”œâ”€â”€ cv_data.yaml             # âœ¨ Single source of truth (YAML)
  â”œâ”€â”€ Makefile                 # Build automation
  â”œâ”€â”€ README.md                # Main project documentation
  â”‚
  â”œâ”€â”€ cv_renderer/             # ğŸ Python Package
  â”‚   â”œâ”€â”€ src/                # Source code directory (src-layout)
  â”‚   â”‚   â””â”€â”€ cv_renderer/    # Main package module
  â”‚   â”‚       â”œâ”€â”€ __init__.py # Package initialization
  â”‚   â”‚       â”œâ”€â”€ __main__.py # CLI interface
  â”‚   â”‚       â”œâ”€â”€ app.py      # Main application logic
  â”‚   â”‚       â”œâ”€â”€ renderer.py # Core rendering logic
  â”‚   â”‚       â”œâ”€â”€ models.py   # Data models
  â”‚   â”‚       â”œâ”€â”€ logger.py   # Logging configuration
  â”‚   â”‚       â”œâ”€â”€ app_params.py # Application parameters
  â”‚   â”‚       â””â”€â”€ template_type.py # Template type definitions
  â”‚   â”œâ”€â”€ tests/              # Test suite
  â”‚   â”‚   â”œâ”€â”€ __init__.py     # Test package initialization
  â”‚   â”‚   â””â”€â”€ test_*.py       # Test modules
  â”‚   â”œâ”€â”€ ast/                # AST-related modules (legacy)
  â”‚   â”œâ”€â”€ pyproject.toml      # Poetry configuration
  â”‚   â”œâ”€â”€ poetry.lock         # Poetry lock file
  â”‚   â””â”€â”€ README.md           # Package documentation
  â”‚
  â”œâ”€â”€ templates/               # ğŸ“„ Jinja2 Templates
  â”‚   â”œâ”€â”€ tex/                # LaTeX templates
  â”‚   â”‚   â””â”€â”€ cv-deedy.tex.j2 # Main LaTeX template (PDF output)
  â”‚   â””â”€â”€ web/                # HTML/web templates
  |       â”œâ”€â”€ sitemap.xml.j2  # Sitemap template
  â”‚       â””â”€â”€ index.html.j2   # Main HTML template (web output)
  â”‚
  â”œâ”€â”€ tex/                     # ğŸ“ LaTeX & PDF Components
  â”‚   â”œâ”€â”€ cv.tex              # Generated LaTeX file
  â”‚   â”œâ”€â”€ cv.pdf              # Generated PDF output
  â”‚   â”œâ”€â”€ deedy-resume.cls    # LaTeX class file
  â”‚   â”œâ”€â”€ fonts/              # Custom fonts for PDF styling
  â”‚   â””â”€â”€ *.aux, *.log, etc.  # LaTeX compilation artifacts
  â”‚
  â”œâ”€â”€ gh-pages/                # ğŸŒ Web Deployment (Vite Project)
  â”‚   â”œâ”€â”€ src/                # Source files for web app
  â”‚   â”‚   â”œâ”€â”€ main.js         # Main JavaScript entry point
  â”‚   â”‚   â”œâ”€â”€ styles.css      # Web styling
  â”‚   â”‚   â””â”€â”€ fallback-detection.js # PDF.js capability detection
  â”‚   â”œâ”€â”€ public/             # Static assets
  â”‚   â”‚   â”œâ”€â”€ cv.pdf          # PDF copy for web display
  â”‚   â”‚   â”œâ”€â”€ pdfjs/          # PDF.js viewer files
  â”‚   â”‚   â”œâ”€â”€ img/            # Web assets/images/favicons
  â”‚   â”‚   â”œâ”€â”€ sitemap.xml     # SEO sitemap
  â”‚   â”‚   â””â”€â”€ robots.txt      # Search engine directives
  â”‚   â”œâ”€â”€ dist/               # Built/compiled output (GitHub Pages deployment)
  â”‚   â”‚   â”œâ”€â”€ index.html      # Generated main web CV page
  â”‚   â”‚   â”œâ”€â”€ assets/         # Bundled CSS/JS assets
  â”‚   â”‚   â”œâ”€â”€ cv.pdf          # PDF copy for deployment
  â”‚   â”‚   â””â”€â”€ pdfjs/          # PDF.js viewer files (copied)
  â”‚   â”œâ”€â”€ package.json        # Node.js dependencies
  â”‚   â”œâ”€â”€ pnpm-lock.yaml      # Package manager lock file
  â”‚   â”œâ”€â”€ vite.config.js      # Vite build configuration
  â”‚   â”œâ”€â”€ eslint.config.js    # ESLint configuration
  â”‚   â””â”€â”€ index.html          # Development HTML template
  â”‚
  â”œâ”€â”€ .github/                 # ğŸ”„ CI/CD Workflows
  â””â”€â”€ .cursor/rules/           # ğŸ“‹ Project Rules
  ```

  ## ğŸ¯ Component Purposes

  ### **ğŸ“Š Data Layer**

  - `cv_data.yaml`: **Single source of truth** - All CV content in structured YAML
  - `templates/*.j2`: **Jinja2 templates** for rendering to different formats

  ### **ğŸ Python Package (`cv_renderer/`)**

  - **Purpose**: Template-based CV generation system with modern src-layout structure
  - **Functionality**: Renders YAML data to LaTeX/HTML using Jinja2 templates
  - **CLI**: `python -m cv_renderer` for command-line usage
  - **Structure**: Follows Python src-layout with source code in `src/cv_renderer/`
  - **Testing**: Comprehensive test suite in `tests/` directory
  - **Dependencies**: Managed with Poetry (`pyproject.toml` and `poetry.lock`)

  ### **ğŸ“ LaTeX & PDF Components (`tex/`)**

  - `tex/cv.tex`: **Generated LaTeX** from YAML data via template
  - `tex/cv.pdf`: **Final PDF output** compiled from LaTeX
  - `tex/deedy-resume.cls`: **LaTeX class** defining document style
  - `tex/fonts/`: **Custom fonts** for PDF styling
  - `tex/*.aux, *.log, etc.`: **LaTeX compilation artifacts** (auto-generated)

  ### **ğŸŒ Web Deployment (`gh-pages/`)**

  - **Purpose**: Modern Vite-based web application for GitHub Pages CV deployment
  - **Development Structure**:
    - `src/`: **Source files** - JavaScript, CSS, and detection scripts
    - `public/`: **Static assets** - PDF, PDF.js viewer, images, SEO files
    - `index.html`: **Development template** for Vite
  - **Build & Deployment**:
    - `dist/`: **Production build** output for GitHub Pages deployment
    - `vite.config.js`: **Build configuration** for asset bundling and optimization
    - `package.json`: **Dependencies** and build scripts
  - **PDF Integration**: PDF.js viewer for seamless in-browser PDF display
  - **Modern Tooling**: ESLint, pnpm, and Vite for development workflow

  ### **ğŸ”§ Build & Automation**

  - `Makefile`: **Build commands** for generating different formats
  - `.github/`: **CI/CD workflows** for automated building/deployment

  ## ğŸ“ Design Principles

  1. **Single Source of Truth**: All content originates from `cv_data.yaml`
  2. **Template-Based**: Use Jinja2 templates for consistent rendering
  3. **Multi-Format Output**: LaTeX/PDF, HTML, and web deployment
  4. **Separation of Concerns**: Data, templates, rendering logic, and deployment are separate
  5. **Automated Pipeline**: From YAML â†’ Templates â†’ Multiple Outputs â†’ Deployment
  6. **Organized Structure**: LaTeX files contained in `tex/` directory
  7. **Modern Python Structure**: Follows src-layout with proper separation of source and tests

  ## ğŸš« What NOT to Do

  - Don't duplicate content across formats - use templates
  - Don't place generated files in version control (except web deployment)
  - Don't mix data with presentation logic
  - Don't create files outside the established structure
  - Don't bypass the template system for content changes
  - Don't put LaTeX files in the root directory - use `tex/`

examples:

- input: |

  # Bad: Mixed structure with LaTeX files in root

  â”œâ”€â”€ cv.tex
  â”œâ”€â”€ cv.pdf
  â”œâ”€â”€ cv_latex.tex
  â”œâ”€â”€ cv_html.html
  â”œâ”€â”€ python_scripts/
  â””â”€â”€ web_files/

  # Good: Organized structure with tex/ directory and src-layout

  â”œâ”€â”€ cv_data.yaml
  â”œâ”€â”€ cv_renderer/
  â”‚ â”œâ”€â”€ src/cv_renderer/
  â”‚ â”œâ”€â”€ tests/
  â”‚ â””â”€â”€ pyproject.toml
  â”œâ”€â”€ templates/
  â”œâ”€â”€ tex/
  â”‚ â”œâ”€â”€ cv.tex
  â”‚ â”œâ”€â”€ cv.pdf
  â”‚ â””â”€â”€ deedy-resume.cls
  â””â”€â”€ gh-pages/
  output: "Proper CV project organization with LaTeX files contained in tex/ directory"

metadata:
priority: high
version: 1.2
principle: "Structure enables maintainability and automation"
</rule>
