{{ static.disclaimer_html }}

<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Primary Meta Tags -->
    <title>{{ metadata.pdf_title }}</title>
    <meta name="title" content="{{ metadata.pdf_title }}">
    <meta name="author" content="{{ metadata.pdf_author }}">
    <meta name="description" content="{{ personal.summary | markdown_plain }}">
    <meta name="keywords" content="{{ metadata.pdf_keywords }}">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="google" content="notranslate">
    <meta name="robots" content="index, follow">
    <meta name="language" content="English">

    <!-- Canonical URL -->
    <link rel="canonical" href="{{ metadata.url }}">

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/img/favicon.png">
    <link rel="icon" type="image/png" href="/img/favicon/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="/img/favicon/favicon.svg" />
    <link rel="shortcut icon" href="/img/favicon/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/img/favicon/apple-touch-icon.png" />
    <meta name="apple-mobile-web-app-title" content="{{ metadata.app_name }}" />
    <link rel="manifest" href="/img/favicon/site.webmanifest" />

    <!-- Stylesheets -->
    <link rel="stylesheet" href="/src/styles.css">

    <!-- Preload critical resources -->
    <link rel="preload" href="/cv.pdf" as="document">
    <link rel="preload" href="/src/pdfjs/web/viewer.html" as="document">

    <!-- DNS prefetch for external resources -->
    <link rel="dns-prefetch" href="//github.com">

    <!-- Main script -->
    <script type="module" src="/src/main.js"></script>

    <!-- PDF Viewer Resolver -->
    <script type="module">
        const base = import.meta.env.BASE_URL;
        const cvUrl = base + 'cv.pdf';

        let iframeSrc = `${base}pdfjs/web/viewer.html?file=${encodeURIComponent(cvUrl)}`;

        const accessibilityModeUrl = encodeURIComponent(`${base}?accessibility=true`);
        iframeSrc += `&accessibilityModeUrl=${accessibilityModeUrl}`;

        {% if metadata.source_url %}
        const sourceUrl = encodeURIComponent('{{ metadata.source_url }}');
        iframeSrc += `&sourceUrl=${sourceUrl}`;
        {% endif %}

        {% if metadata.locale %}
        const locale = encodeURIComponent('{{ metadata.locale }}');
        iframeSrc += `&locale=${locale}`;
        {% endif %}

        document.getElementById('pdf-viewer-iframe').src = iframeSrc;

        document.getElementById('cv-download').href = cvUrl;
        document.getElementById('cv-open-in-new-tab').href = cvUrl;

    </script>
</head>

<body>
    <!-- PDF Viewer (hidden by default) -->
    <div id="pdf-viewer-container" style="display: none;">
        <iframe id="pdf-viewer-iframe" width="100%" height="100%" frameborder="0">
        </iframe>
    </div>

    <!-- Fallback interface (visible by default) -->
    <div id="fallback-container">
        <h1>{{ metadata.pdf_title }}</h1>
        <p>Please download or view the CV</p>
        <a id="cv-download" download="{{ metadata.pdf_filename }}">Download CV (PDF)</a>
        <a id="cv-open-in-new-tab" href="{{ metadata.pdf_url }}" target="_blank">Open in New Tab</a>
    </div>
</body>

</html>
